language: node_js

cache:
  directories:
  - ~/.npm

notifications:
  email: false

node_js:
- '6'
- '8'
- '10'

before_install:
- npm i -g npm@latest

install:
- npm ci

script:
- commitlint-travis
- npm run cloc
- npm run jscpd
- npm run tslint
- npm run build

after_success:
- npm run travis-deploy-once "npm run semantic-release"

branches:
  except:
  - /^v\d+\.\d+\.\d+$/
